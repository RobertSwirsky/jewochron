<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Jewochron.Views.YahrzeitPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Jewochron.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="#1E1E1E">
    
    <ScrollViewer>
        <StackPanel Spacing="24" Padding="24">
            <StackPanel Orientation="Horizontal" Spacing="12">
                <Button Content="â† Back" Click="BackButton_Click" FontSize="16" />
                <TextBlock Text="Yahrzeit Management" FontSize="32" FontWeight="Bold" VerticalAlignment="Center" />
            </StackPanel>
            
            <TextBlock Text="Add and manage memorial dates (yahrzeits) for loved ones." FontSize="16" Margin="0,0,0,16" />

            <!-- Yahrzeit Entry Form -->
            <Border Background="#2D2D30" CornerRadius="12" Padding="16">
                <StackPanel Spacing="12">
                    <TextBlock Text="Add New Yahrzeit" FontSize="20" FontWeight="SemiBold" />
                    
                    <TextBox x:Name="txtNameEnglish" Header="English Name" PlaceholderText="Enter name in English" />
                    
                    <TextBox x:Name="txtNameHebrew" Header="Hebrew Name" PlaceholderText="Enter name in Hebrew" />
                    
                    <ComboBox x:Name="cmbGender" Header="Gender">
                        <ComboBoxItem Content="Male" Tag="M" />
                        <ComboBoxItem Content="Female" Tag="F" />
                    </ComboBox>
                    
                    <!-- Hebrew Date Picker for Yahrzeit -->
                    <StackPanel Spacing="8">
                        <TextBlock Text="Date of Passing (Hebrew Date)" FontWeight="SemiBold" />
                        <Border Background="#3C3C3C" CornerRadius="8" Padding="12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <!-- Headers -->
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Day" HorizontalAlignment="Center" FontSize="14" Foreground="#888" Margin="0,0,0,8" />
                                <TextBlock Grid.Row="0" Grid.Column="1" Text="Month" HorizontalAlignment="Center" FontSize="14" Foreground="#888" Margin="0,0,0,8" />
                                <TextBlock Grid.Row="0" Grid.Column="2" Text="Year" HorizontalAlignment="Center" FontSize="14" Foreground="#888" Margin="0,0,0,8" />

                                <!-- Controls -->
                                <ComboBox x:Name="YahrzeitDayComboBox" Grid.Row="1" Grid.Column="0" HorizontalAlignment="Stretch" Margin="0,0,4,0" SelectionChanged="YahrzeitDayComboBox_SelectionChanged" />
                                <ComboBox x:Name="YahrzeitMonthComboBox" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Stretch" Margin="2,0,2,0" SelectionChanged="YahrzeitMonthComboBox_SelectionChanged" />
                                <ComboBox x:Name="YahrzeitYearComboBox" Grid.Row="1" Grid.Column="2" HorizontalAlignment="Stretch" Margin="4,0,0,0" SelectionChanged="YahrzeitYearComboBox_SelectionChanged" />
                            </Grid>
                        </Border>
                        <TextBlock x:Name="YahrzeitSelectedDateDisplay" FontSize="14" Foreground="#4EC9B0" TextAlignment="Center" />
                    </StackPanel>
                    
                    <Button Content="Add Yahrzeit" Click="AddYahrzeit_Click" Style="{StaticResource PrimaryAction}" />
                </StackPanel>
            </Border>

            <!-- Yahrzeits List -->
            <Border Background="#2D2D30" CornerRadius="12" Padding="16">
                <StackPanel Spacing="12">
                    <TextBlock Text="Memorial Dates" FontSize="20" FontWeight="SemiBold" />
                    <ListView x:Name="YahrzeitsList" ItemsSource="{x:Bind Yahrzeits}" SelectionMode="Single" ItemClick="YahrzeitsList_ItemClick" IsItemClickEnabled="True">
                        <ListView.ItemTemplate>
                            <DataTemplate x:DataType="local:YahrzeitDisplayItem">
                                <Border Background="#3C3C3C" CornerRadius="8" Padding="16" Margin="0,4">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        
                                        <StackPanel Grid.Column="0" Spacing="4">
                                            <TextBlock Text="{x:Bind EnglishName}" FontSize="18" FontWeight="SemiBold" />
                                            <TextBlock Text="{x:Bind HebrewName}" FontSize="16" Foreground="#9966FF" FlowDirection="RightToLeft" />
                                            <TextBlock Text="{x:Bind HebrewDate}" FontSize="14" Foreground="#9966FF" />
                                            <TextBlock Text="{x:Bind NextOccurrence}" FontSize="14" Foreground="#4EC9B0" />
                                        </StackPanel>
                                        
                                        <Button Grid.Column="1" Content="ðŸ—‘ï¸" Click="DeleteYahrzeit_Click" Tag="{x:Bind Id}" VerticalAlignment="Top" />
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Page>
